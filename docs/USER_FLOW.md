# 玄覺空間 - 使用者流程文件

## 占卜流程

### 1. 首頁 (/)
使用者可以選擇占卜方式：
- **六爻占卜**：點擊「開始六爻占卜」
- **塔羅占卜**：點擊「開始塔羅占卜」

### 2. 問問題頁面 (/question)
- 系統會根據首頁選擇預設占卜方式（`?method=liuyao` 或 `?method=tarot`）
- 使用者輸入想要占卜的問題
- 使用者可以隨時切換占卜方式
- 點擊「開始占卜」或對應按鈕提交
- **驗證點**：
  - URL 參數是否正確帶入
  - 預選樣式是否正確顯示（邊框高亮）
  - 未輸入問題時是否有提示

### 3. 占卜頁面 (/liuyao 或 /tarot)

#### 六爻占卜流程：
1. **進入頁面**：檢查問題是否正確顯示
2. **擲幣階段**：
   - 點擊「擲銅錢」按鈕 6 次
   - 觀察 3D 擲幣動畫
   - 確認每次擲幣結果記錄
3. **結果生成**：
   - 6 次擲幣完成後，自動或手動提交
   - AI 分析並提供解讀

#### 塔羅占卜流程：
1. **進入頁面**：檢查問題是否正確顯示
2. **選擇牌陣**：
   - 選擇：單張 / 三張 / 凱爾特十字
   - 確認牌陣說明顯示正確
3. **洗牌與抽牌**：
   - 點擊洗牌動畫
   - 憑直覺點擊卡牌背面進行抽取
   - 抽滿所需張數後確認
4. **翻牌與解讀**：
   - 依序翻開卡牌（觀察動畫）
   - AI 分析並提供解讀

### 4. 結果頁面
- 查看完整的 AI 解讀（Markdown 渲染）
- 展開/摺疊「AI 思考過程」
- 儲存至歷史紀錄
- 分享結果連結

## 技術實現細節

### URL 參數傳遞
- 問題通過 URL 參數傳遞：`?q=使用者的問題`
- 占卜方式通過 URL 參數預選：`?method=liuyao` 或 `?method=tarot`
- 中文參數會自動編碼/解碼

### 重導向邏輯
- 若直接訪問 `/liuyao` 或 `/tarot` 而沒有問題參數 (`q`)
- 系統會自動重導向至 `/question`
- 這確保使用者始終提供問題才能進行占卜

### 主題切換驗證
- 所有頁面支援明暗主題切換（Navbar 上的太陽/月亮圖示）
- **六爻頁面**：卡片背景、文字顏色、擲幣區域
- **塔羅頁面**：卡片背景、翻牌動畫、牌陣佈局
- 主題選擇會儲存在 localStorage，重新整理後應保持一致
