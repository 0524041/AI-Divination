# V2.0 Overhaul Plan (改版計畫與 ToDo List)

本文件紀錄了 AI-Divination 專案邁向 V2.0 的核心目標與待辦事項。

## 核心目標
提升系統的開發效率、模組化程度以及使用者交互體驗，並擴展多樣化的預測工具。

---

## ToDo List (待辦清單)

### 1. 前端框架重構 (Frontend Modernization)
- [ ] **框架切換**: 從 `Alpine.js + Flask Template` 遷移至 **Next.js (App Router)**。
- [ ] **樣式系統**: 使用 **Tailwind CSS** 代替原始的 CSS 文件，提升開發效率與元件復用性。
- [ ] **UI 元件庫**: 整合 **shadcn/ui** 以實現更專業、一致的介面元件（如對話框、表格、按鈕）。
- [ ] **性能優化**: 利用 Next.js 的 Server Components 與渲染優化機制提升加載速度。

### 2. 後端模組化升級 (Backend Refactoring)
- [ ] **架構解耦**: 取消目前的 MCP Client-Server 動態啟動架構。
- [ ] **封裝為 Library**: 將原有的卜卦工具代碼直接封裝為 Python 函式庫 (`lib/` 或 `tools/` 直接調用)。
- [ ] **調用優化**: 提升後端執行效率，減少通訊開銷。

### 3. AI 輸出與呈现優化 (AI Content & Presentation)
- [ ] **輸出格式調整**: 取消強制 JSON 輸出（因易造成解析錯誤且內容死板）。
- [ ] **結構化 Markdown**: 調整 System Prompt，引導 AI 輸出具有特定標籤與結構的 Markdown。
- [ ] **前端渲染強化**: 在前端針對特定 Markdown 格式實現高亮顯示與組件渲染。

### 4. 占卜引導系統 (Structured Guidance)
- [ ] **問題引導介面**: 增加「引導式提問」功能，協助使用者明確具體事項（如：財運、感情、事業的分支選擇）。
- [ ] **提問結構化**: 確保輸入的問題包含足夠的上下文細節，以獲取更準確的 AI 解析。

### 5. 多工具擴展能力 (Multi-Tool Modularization)
- [ ] **框架擴展**: 保留現有模組化設計，支援插入其他工具（如：紫微斗數、梅花易數等）。
- [ ] **工具庫擴充**: 在 `tools/` 或 `lib/` 目錄下預留各類命理計算邏輯的接口。
- [ ] **多工具 UI**: 前端支援根據選擇的預測工具動態切換輸入與顯示介面。

---

## 預期效益
*   **開發者友好**: 更標準化的技術棧 (Next.js, Tailwind)。
*   **系統穩定**: 減少進程間通信 (MCP)，提升穩健性。
*   **體驗升級**: 更精準的 AI 解答與更流暢的引導。
