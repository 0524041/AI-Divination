# ğŸ”® éˆæ©Ÿä¸€å‹• - AI æ˜“ç¶“å åœç³»çµ± 

**AI Divination App** - çµåˆç¾ä»£ AI æŠ€è¡“èˆ‡å‚³çµ±å…­çˆ»å åœçš„æ™ºæ…§ç®—å¦ç³»çµ±

![Home Page Screenshot](homepage_screenshot.png)

## âœ¨ V2.0 é‡å¤§æ›´æ–°

### ğŸ¨ å…¨æ–°å‰ç«¯æ¶æ§‹
- **Next.js 16 + React** - ç¾ä»£åŒ–å–®é æ‡‰ç”¨
- **shadcn/ui** - ç²¾ç¾ UI å…ƒä»¶åº«
- **Tailwind CSS v4** - åŸå­åŒ– CSS
- **éŸ¿æ‡‰å¼å´é‚Šæ¬„** - ç°¡æ½”å°èˆªè¨­è¨ˆ
- **ç»ç’ƒæ“¬æ…‹è¨­è¨ˆ** - æ·±è‰²ä¸»é¡Œ + é‡‘è‰²é»ç¶´

### ğŸ§  AI åŠŸèƒ½
- **Google Gemini** - é›²ç«¯ AI è§£å¦ (gemini-3-flash-preview + high thinking)
- **æœ¬åœ° LLM** - æ”¯æ´ OpenAI å…¼å®¹ API (é è¨­)
- **æ€ç¶­éç¨‹å¯è¦–åŒ–** - å±•é–‹/æ”¶åˆ AI æ€è€ƒéç¨‹
- **æ¨¡å‹è¿½è¹¤** - é¡¯ç¤ºå åœä½¿ç”¨çš„ AI æ¨¡å‹ã€æ­·å²è¨˜éŒ„ä¿å­˜æ¨¡å‹åç¨±

### ğŸ‘¥ å¤šç”¨æˆ¶ç³»çµ±
- ç”¨æˆ¶è¨»å†Š/ç™»å…¥ï¼ˆå¯†ç¢¼ç¢ºèªåŠŸèƒ½ï¼‰
- ç®¡ç†å“¡å¾Œå°ï¼ˆæ–°å¢ç”¨æˆ¶å¯†ç¢¼ç¢ºèªï¼‰
- ç¨ç«‹æ­·å²è¨˜éŒ„
- API Key ç®¡ç†

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
AI-Divination/
â”œâ”€â”€ backend/                    # å¾Œç«¯æ¨¡çµ„ (Python æ¨™æº–çµæ§‹)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/               # API è—åœ–
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py      # æ‡‰ç”¨é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ database.py    # è³‡æ–™åº«æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ models/            # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py        # ç”¨æˆ¶æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ history.py     # æ­·å²è¨˜éŒ„
â”‚   â”‚   â”‚   â””â”€â”€ settings.py    # ç³»çµ±è¨­å®š
â”‚   â”‚   â”œâ”€â”€ services/          # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â”‚   â”œâ”€â”€ ai.py          # AI æœå‹™ (Gemini/Local)
â”‚   â”‚   â”‚   â”œâ”€â”€ divination.py  # å åœè¨ˆç®—
â”‚   â”‚   â”‚   â””â”€â”€ divination_core.py  # å…­çˆ»æ’ç›¤æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”‚   â””â”€â”€ auth.py        # èªè­‰è£é£¾å™¨
â”‚   â”‚   â””â”€â”€ routes.py          # API è·¯ç”±
â”‚   â”œâ”€â”€ prompts/               # AI Prompt æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ system_prompt.md
â”‚   â””â”€â”€ run.py                 # å¾Œç«¯å•Ÿå‹•å…¥å£
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯æ‡‰ç”¨ (Next.js)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/               # é é¢è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx       # é¦–é  (å…­çˆ»å åœ)
â”‚   â”‚   â”‚   â”œâ”€â”€ history/       # æ­·å²è¨˜éŒ„
â”‚   â”‚   â”‚   â”œâ”€â”€ settings/      # è¨­å®šé é¢
â”‚   â”‚   â”‚   â””â”€â”€ admin/         # ç®¡ç†å“¡é é¢
â”‚   â”‚   â”œâ”€â”€ components/        # React å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ AppLayout.tsx  # ä¸»ä½ˆå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ AppSidebar.tsx # å´é‚Šæ¬„
â”‚   â”‚   â”‚   â”œâ”€â”€ LiuYaoPage.tsx # å…­çˆ»ä¸»é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ DivinationResult.tsx  # å åœçµæœ
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthForm.tsx   # ç™»å…¥/è¨»å†Šè¡¨å–®
â”‚   â”‚   â”‚   â””â”€â”€ ui/            # shadcn/ui å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/          # React Context
â”‚   â”‚   â”œâ”€â”€ lib/               # å·¥å…·å‡½æ•¸
â”‚   â”‚   â””â”€â”€ types/             # TypeScript é¡å‹å®šç¾©
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ _legacy_backup/            # èˆŠç‰ˆæª”æ¡ˆå‚™ä»½
â”œâ”€â”€ docs/                       # å°ˆæ¡ˆæ–‡ä»¶
â”œâ”€â”€ start.sh                    # ä¸€éµå•Ÿå‹•è…³æœ¬
â””â”€â”€ README.md
```

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç³»çµ±éœ€æ±‚
- Python 3.10+
- Node.js 18+
- npm æˆ– pnpm

### 1. å®‰è£èˆ‡å•Ÿå‹•

```bash
# å…‹éš†å°ˆæ¡ˆ
git clone <repo-url>
cd AI-Divination

# ä¸€éµå•Ÿå‹• (è‡ªå‹•å®‰è£ä¾è³´)
chmod +x start.sh
./start.sh
```

### 2. è¨ªå•æ‡‰ç”¨

- **å‰ç«¯**: http://localhost:3000
- **å¾Œç«¯ API**: http://localhost:8080

### 3. é è¨­å¸³è™Ÿ

```
ç”¨æˆ¶å: admin
å¯†ç¢¼: admin123
```

---

## ğŸ”§ è¨­å®šèªªæ˜

### AI æ¨¡å‹è¨­å®š

é€²å…¥ã€Œè¨­å®šã€é é¢å¯ä»¥é¸æ“‡ï¼š

| è¨­å®šé … | èªªæ˜ |
|--------|------|
| **AI æä¾›è€…** | `local` (é è¨­) æˆ– `gemini` |
| **Local API URL** | æœ¬åœ° LLM æœå‹™åœ°å€ (é è¨­: `http://localhost:1234/v1`) |
| **Local Model** | æ¨¡å‹åç¨± (é è¨­: `qwen/qwen3-8b`) |
| **Gemini API Key** | ä½¿ç”¨ Gemini æ™‚éœ€è¦å¡«å…¥ |

> **ç›®å‰ AI æ¨¡å‹**
> - Gemini: `gemini-3-flash-preview` (high thinking mode)
> - Local: å¯è‡ªå®šç¾© (é è¨­ `qwen/qwen3-8b`)

å åœé é¢æœƒé¡¯ç¤ºç•¶å‰ä½¿ç”¨çš„ AI æ¨¡å‹ï¼Œæ­·å²è¨˜éŒ„ä¹Ÿæœƒä¿å­˜ä½¿ç”¨çš„æ¨¡å‹åç¨±ã€‚

### æœ¬åœ° AI è¨­å®š

æ¨è–¦ä½¿ç”¨ [LM Studio](https://lmstudio.ai/) æˆ– [Ollama](https://ollama.ai/) é‹è¡Œæœ¬åœ°æ¨¡å‹ï¼š

```bash
# LM Studio - å•Ÿå‹•å¾Œé¸æ“‡æ¨¡å‹ï¼Œé–‹å•Ÿ Local Server (port 1234)

# Ollama
ollama run qwen2.5:7b
```

---

## ğŸ›¡ï¸ åŠŸèƒ½ç‰¹è‰²

### å…­çˆ»å åœ
- ğŸ² äº’å‹•å¼æ–å¦å‹•ç•«
- ğŸ“Š å°ˆæ¥­å…­çˆ»æ’ç›¤
- ğŸ§  AI æ™ºèƒ½è§£å¦
- ğŸ“ æ€ç¶­éç¨‹å¯è¦–åŒ–

### æ­·å²è¨˜éŒ„
- ğŸ“‚ æŸ¥çœ‹éå¾€å åœ
- â­ æ”¶è—é‡è¦è¨˜éŒ„
- ğŸ“‹ è¤‡è£½ç‚º Markdown
- ğŸ—‘ï¸ åˆªé™¤è¨˜éŒ„

### ç®¡ç†åŠŸèƒ½ (Admin)
- ğŸ‘¥ ç”¨æˆ¶ç®¡ç†
- ğŸ“Š æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ¶æ­·å²
- âš™ï¸ ç³»çµ±è¨­å®š

---

## ğŸ“¡ API ç«¯é»

| æ–¹æ³• | è·¯å¾‘ | èªªæ˜ |
|------|------|------|
| POST | `/api/login` | ç”¨æˆ¶ç™»å…¥ |
| POST | `/api/logout` | ç”¨æˆ¶ç™»å‡º |
| POST | `/api/register` | ç”¨æˆ¶è¨»å†Š |
| GET | `/api/current-user` | ç²å–ç•¶å‰ç”¨æˆ¶ |
| POST | `/api/divinate` | åŸ·è¡Œå åœ |
| GET | `/api/history` | ç²å–æ­·å²è¨˜éŒ„ |
| PUT | `/api/history/:id/favorite` | åˆ‡æ›æ”¶è— |
| DELETE | `/api/history/:id` | åˆªé™¤è¨˜éŒ„ |
| GET/POST | `/api/settings` | ç³»çµ±è¨­å®š |
| GET | `/api/admin/users` | ç”¨æˆ¶åˆ—è¡¨ (Admin) |

---

## ğŸ”„ æ›´æ–°æ—¥èªŒ

### v2.1.0 (2025-06-XX)
**ğŸ› ï¸ åŠŸèƒ½å¢å¼·**
- âœ¨ å åœé é¢é¡¯ç¤ºç•¶å‰ AI æ¨¡å‹
- âœ¨ æ­·å²è¨˜éŒ„ä¿å­˜ä¸¦é¡¯ç¤ºä½¿ç”¨çš„ AI æ¨¡å‹
- âœ¨ è¨»å†Š/ç®¡ç†å“¡æ–°å¢ç”¨æˆ¶éœ€è¼¸å…¥å…©æ¬¡å¯†ç¢¼ç¢ºèª
- ğŸ”§ Gemini æ¨¡å‹æ›´æ–°ç‚º `gemini-3-flash-preview` (high thinking)
- ğŸ”§ å¾Œç«¯é‡æ§‹ç‚ºæ¨™æº– Python å°ˆæ¡ˆçµæ§‹
- ğŸ”§ å´é‚Šæ¬„å°èˆªç°¡åŒ–

### v2.0.0 (2025-12-26)
**ğŸ¨ å‰ç«¯å¤§æ”¹ç‰ˆ**
- âœ¨ å…¨æ–° Next.js + React å‰ç«¯
- âœ¨ shadcn/ui å´é‚Šæ¬„
- âœ¨ æ­·å²è¨˜éŒ„ Markdown æ¸²æŸ“
- âœ¨ AI æ€è€ƒéç¨‹æŠ˜ç–Šé¡¯ç¤º
- ğŸ”§ ä¿®å¾© is_favorite é¡¯ç¤ºå•é¡Œ

### v0.4.0 (2024-12-24)
- âœ¨ å¤šç”¨æˆ¶ç³»çµ±
- âœ¨ Admin ç®¡ç†é¢æ¿
- âœ¨ é›™ AI æ¨¡å‹æ”¯æ´

### v0.3.0
- ç©ºéˆç„å­¸ UI ä¸»é¡Œ
- æ­·å²è¨˜éŒ„ç®¡ç†

### v0.2.0
- åŸºç¤å åœåŠŸèƒ½
- Gemini AI æ•´åˆ

---

## ğŸ› ï¸ æŠ€è¡“æ£§

| é¡å‹ | æŠ€è¡“ |
|------|------|
| **å‰ç«¯** | Next.js 16, React 19, TypeScript, Tailwind CSS v4 |
| **UI åº«** | shadcn/ui, Lucide Icons |
| **å¾Œç«¯** | Flask, SQLite |
| **AI** | Google Gemini, OpenAI Compatible API |
| **å åœ** | lunar-python (è¾²æ›†è¨ˆç®—) |

---

## ğŸ“œ License

MIT License

---

## ğŸ™ é³´è¬

- [shadcn/ui](https://ui.shadcn.com/) - ç²¾ç¾ React å…ƒä»¶
- [lunar-python](https://github.com/6tail/lunar-python) - è¾²æ›†è¨ˆç®—åº«
- [Google Gemini](https://ai.google.dev/) - AI è§£å¦æœå‹™
